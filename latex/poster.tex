% e-Journal Club Talk Poster v3
% for Radio Cosmology Research Laboratory
% Designed by Shazwan Radzi, LaTeX-ed by Affan Adly

% How to use:
% 1. Change the day, date, and time of the meeting under the \details command, following the format {DAY | DATE | TIME}
% 2. Change the presenter's name under the \presenter command, with capital letters
% 3. Change the bibitem under the filecontent paper.bib below with the corresponding paper/research article. The bibitem has to be identified as 'main' and must have a title, author, year, journal, volume*, number*, and url for the compilation to succeed. To obtain the bibtex from a doi, use https://www.doi2bib.org/
% 4. Set the \articletype command based on the conditions:
%   - If the bibitem is a journal/misc and 
%       - has both volume and number, set to 1
%       - has no number, set to 2
%       - has no volume, set to 3
%       - has neither a number or volume set to 4
%   - If the bibitem is a conference paper, set to 5
%   - To force a custom title, set to the custom title (The url tag in the bibitem will generate the QR code accordingly). 
% 5. Make sure to compile using LuaLaTeX

\input{input}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% DO NOT MODIFY THE DOCUMENT BEYOND THIS BOUNDARY %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass{article}[25pt]
\usepackage[utf8]{inputenc}
\usepackage[top=20mm,bottom=17mm,left=17mm,right=17mm,landscape,a4paper]{geometry}
\usepackage[style=apa]{biblatex}
\usepackage{qrcode}
\usepackage{hyperref}
\usepackage{background}
\usepackage{tabularx}
\usepackage{multirow}
\newcolumntype{Y}{>{\centering\arraybackslash}X}
\usepackage{fontspec}
\usepackage{ifthen}
\usepackage{xstring}

% reference
\addbibresource{paper.bib}

% colors
\definecolor{navyblue}{HTML}{024f6d}
\definecolor{deepblue}{HTML}{222a5b}
\definecolor{vipurple}{HTML}{440148}
\definecolor{frameyellow}{HTML}{fc8e01}

% geometry
\setlength{\fboxsep}{10pt}
\renewcommand\fbox{\fcolorbox{vipurple}{white}}
\setlength{\fboxrule}{1.5pt}
\setlength{\parindent}{0pt}

% background
\backgroundsetup{
scale=1,
angle=0,
opacity=1,
contents={\begin{tikzpicture}[remember picture,overlay]
 \path [top color = navyblue,middle color = deepblue, bottom color = vipurple] (current page.south west)rectangle (current page.north east);
 \draw[draw=frameyellow,line width=0.8mm] (-137.48mm,-93.98mm) rectangle (137.48mm,93.98mm);
 \filldraw[fill=white] (-137.48mm+0.5mm,-93.98mm+0.5mm) rectangle (137.48mm-0.5mm,93.98mm-0.5mm);
\end{tikzpicture}}
}

% fonts
\setromanfont{bebas}[
    Path=./font/,
    Scale=1,
    Extension = .ttf]
\setsansfont{qthelvet}[
    Path=./font/,
    Scale=1,
    Extension = .ttf]
\setmonofont{qthelvetcnd}[
    Path=./font/,
    Scale=1,
    Extension = .ttf]
\newcommand{\mainfont}[4]{\fontsize{#1}{#2}\selectfont\textcolor{#3}{#4}}

% generate QR code
\DeclareCiteCommand{\citeqrurl}
  {\boolfalse{citetracker}%
   \boolfalse{pagetracker}%
   \usebibmacro{prenote}}
  {\href{\thefield{url}}{\XeTeXLinkBox{\qrcode[height=1.9in]{\thefield{url}}}}}
  {\multicitedelim}
  {\usebibmacro{postnote}}
  
% generate title citation
\newcommand{\citetitleformat}{
    \IfEqCase{\articletype}{%
        {1}{\citefield{main}{title}, \citefield{main}{journaltitle}, \citefield{main}{volume} (\citefield{main}{number}), (\NoHyper\cite{main})}%
        {2}{\citefield{main}{title}, \citefield{main}{journaltitle}, \citefield{main}{volume}, (\NoHyper\cite{main})}%
        {3}{\citefield{main}{title}, \citefield{main}{journaltitle} (\citefield{main}{number}), (\NoHyper\cite{main})}%
        {4}{\citefield{main}{title}, \citefield{main}{journaltitle}, (\NoHyper\cite{main})}%
        {5}{\citefield{main}{title}, \citefield{main}{booktitle}, (pp. \citefield{main}{pages}), (\NoHyper\cite{main})}}%
        [\articletype]
}

\begin{document}
\begin{center}\thispagestyle{empty}

% Title
\fontsize{32}{30}\selectfont \fbox{\textcolor{frameyellow}{{\textsf{e-JOURNAL CLUB TALK}}}}
\vspace*{\fill}

\end{center}

% Title of the talk and QR Code
\begin{minipage}{0.78\textwidth}
    \raggedright
    \mainfont{40}{45}{black}{Presenter : \presenter}
    \vspace*{0.2em}
    
    \mainfont{35}{38}{black}{
    Title : \citetitleformat
    }
\end{minipage}%
\begin{minipage}{0.02\textwidth}
    \hfill
\end{minipage}%
\begin{minipage}{0.2\textwidth}
    \centering\citeqrurl{main}
    
    \vspace*{0.5em}
    
    \mainfont{20}{20}{black}{Scan or click this QR Code to download the paper}
\end{minipage}

% Meeting details
\begin{center}
\vspace*{\fill}
\mainfont{35}{30}{navyblue}{\details}
\vspace*{0.2em}

% Zoom ID
\mainfont{26}{30}{navyblue}{\href{https://us02web.zoom.us/j/83687159462}{Join via Zoom ID : 836 8715 9462 (click to join)}\\Organised by : Radio Cosmology Lab UM}
\vspace*{\fill}

\end{center}

% Footer
{
\fontsize{18}{18}\selectfont\textcolor{vipurple}{\texttt{
\renewcommand{\arraystretch}{1}
\begin{tabularx}{0.98\textwidth}{cYc}
    \multirow{4}*{\includegraphics[width=7em]{UM.png}} & For more information: & \multirow{4}*{\href{https://sites.google.com/view/radiocosmologylaboratory/home}{\XeTeXLinkBox{\includegraphics[width=6em]{RCRL.png}}}} \\
    & Prof. Dr. Zamri Zainal Abidin & \\
    & Phone: 03-7967 4299 & \\
    & Email: zzaa@um.edu.my & 
\end{tabularx}}
}}

\end{document}